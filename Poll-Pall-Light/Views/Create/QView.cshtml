@model QItemViewModel

<h1>@Model.PollTitle</h1>

@{
	TempData["id"] = ViewData["PollID"];
}

<div class="container">
	<div class="row">
		<div class="col-sm">
			<table class="table">
				<tr>
					<th>Q Items</th>
				</tr>
				@foreach (var q in Model.QItems)
				{
					<tr>
						<td>
							<a class="alert-link" style="color: #323232" asp-controller="Create" asp-action="CreateQItem" asp-route-id="@q.PollID">@q.Title</a>
						</td>
						<td>
							@* <button type="submit" class="btn btn-danger text-dark" style="color: #bf5454" id="deleteQ" asp-controller="Delete" asp-action="DeleteQItem" asp-route-id="@q.ID">Delete</button> *@
							<button type="button" class="btn btn-danger" data-toggle="ajax-modal" data-target="#DeleteQ" data-url="@Url.Action("DeleteQItem", "Delete")">Delete</button>
							@* @Html.ActionLink("Delete", "DeleteQItem", "Delete", new {id = q.ID}, null)); *@
						</td>
					</tr>
				}
			</table>
		</div>
		<div class="col-sm">
			<form asp-controller="Create" asp-action="CreateQItem" method="post" class="form-group">
				<div>
					<label asp-for="QCreateViewModel.Title">Title</label>
					<input class="form-control bg-dark text-light" asp-for="QCreateViewModel.Title"/>
				</div>
				<input type="submit" class="form-control bg-dark text-light" value="Add Q">
			</form>
		</div>
	</div>
</div>

<div id="confirmDialog" title="Delete Q" hidden>
 <p>Do you want to delete this q? </p>
</div>

<script src="/lib/jquery/dist/jquery.js"></script>
<script src="/lib/jquery-ui-1.12.1.custom/jquery-ui.js"></script>
<script>
    $(function () {
 
        $('a[id*=btnDelete]').click(function (e) {
            debugger;
            e.preventDefault();
            $('#confirmDialog').dialog('open');
        });
 
        $("#confirmDialog").dialog({
            autoOpen: false,
            modal: true,
            resizable: false,
            buttons: {
                "Ok": function () {
                    window.location.href = '/QView/Delete/' + id;
                },
                "Cancel": function (e) {
                    $(this).dialog("close");
                }
            },
        });
    });
</script>